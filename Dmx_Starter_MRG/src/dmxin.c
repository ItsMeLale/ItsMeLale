
/*
?                       ██████╗ ███╗   ███╗██╗  ██╗    ██╗███╗   ██╗██████╗ ██╗   ██╗████████╗███████╗
?                       ██╔══██╗████╗ ████║╚██╗██╔╝    ██║████╗  ██║██╔══██╗██║   ██║╚══██╔══╝██╔════╝
?                       ██║  ██║██╔████╔██║ ╚███╔╝     ██║██╔██╗ ██║██████╔╝██║   ██║   ██║   ███████╗
?                       ██║  ██║██║╚██╔╝██║ ██╔██╗     ██║██║╚██╗██║██╔═══╝ ██║   ██║   ██║   ╚════██║
?                       ██████╔╝██║ ╚═╝ ██║██╔╝ ██╗    ██║██║ ╚████║██║     ╚██████╔╝   ██║   ███████║
?                       ╚═════╝ ╚═╝     ╚═╝╚═╝  ╚═╝    ╚═╝╚═╝  ╚═══╝╚═╝      ╚═════╝    ╚═╝   ╚══════╝
*/                                                                




/**
 *? =======================================================================================================================
 *?                                                     INCLUDES
 *? =======================================================================================================================
**/
#include <stdint.h>
#include <stdbool.h>

#include "./inc/dmxin.h"


/**
 *? =======================================================================================================================
 *?                                                     DEFININGS
 *? =======================================================================================================================
**/
uint8_t error =0;


/**
 *? ======================================================================================================================
 *?                                                     CONTROLS DMX
 *?=======================================================================================================================
**/

uint8_t DMX_Scanner(uint8_t init, uint16_t length, uint16_t *bufferDMX){            

uint8_t Dmx_INIT=init;
uint16_t lengthofBuf = length;

    if (Dmx_INIT){
        Dmx_INIT = 0;
        
        // NOTE assumendo che sto ricevendo solamente i dati necessari e non MAB 
        /* 
           * Cosa mi aspetto da un buffer
           * I dati sono decimali 
           * Non dovrebbero contenere sporcizia
           * I dati sono [canale]=data ES: PacchettoDmx[100]=255
        */ 
        for(uint8_t i = 0; i <lengthofBuf;i++){
            
            if(i%4==1){
                error=1;            
            }    
            else{
                if(bufferDMX[i]>0){
                    DmxFounded(bufferDMX);      //ci sono dati  
                }
                else {
                    error=1;
                }
            }
        }

    }  
    return error;  
}



void DmxFounded(uint16_t * bufferToScan){

    

}